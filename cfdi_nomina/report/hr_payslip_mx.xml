<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="report_hr_payslip_mx_document_old">
            <t t-call="report.html_container">
                <div class="page">

                        <table class="table table-condensed" id="company" style="width: 100%;">
                            <thead>
                                <tr>
                                    <th><h2>Empresa:</h2></th>
                                    <th><h2>Registro Patronal:</h2></th>
                                    <th><h2>RFC:</h2></th>
                                    <th><h2>Periodicidad de Pago:</h2></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span t-field="o.company_id.name"/></td>
                                    <td><span t-field="o.company_id.registro_patronal_id.name"/></td>
                                    <td><span t-field="o.company_id.vat"/></td>
                                    <td><span t-field="o.employee_id.contract_id.periodicidad_pago_id.code"/></td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table table-condensed" id="empleado" style="width: 100%; font-size: 10px;">
                            <tr>
                                <td colspan="2" style="width: 50%; border-left: 1px solid #BDBDBD !important; border-right: 1px solid #BDBDBD !important; border-top: 1px solid #BDBDBD !important;">
                                    <strong t-field="o.employee_id.cod_emp"/> - <strong t-field="o.employee_id.nombre_completo"/>
                                </td>
                                <td colspan="2" style="width: 50%; border-right: 1px solid #BDBDBD !important; border-top: 1px solid #BDBDBD !important;">
                                    <strong>Periodo Calculado:</strong> <strong t-esc="o.get_periodo() "/>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important; ">RFC:</td>
                                <td style="width: 32%; vertical-align:top; "><span t-field="o.employee_id.rfc"/></td>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">Fecha Pago</td>
                                <td style="width: 32%; vertical-align:top; border-right: 1px solid #BDBDBD !important;"><span t-field="o.date"/></td>
                            </tr>
                            <tr>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">CURP:</td>
                                <td style="width: 32%; vertical-align:top;"><span t-field="o.employee_id.curp"/></td>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">Puesto</td>
                                <td style="width: 32%; vertical-align:top; border-right: 1px solid #BDBDBD !important;"><span t-field="o.employee_id.job_id.name"/></td>
                            </tr>
                            <tr>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">Fecha Inicio Laboral:</td>
                                <td style="width: 32%; vertical-align:top;"><span t-field="o.employee_id.contract_id.date_start"/></td>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">Departamento</td>
                                <td style="width: 32%; vertical-align:top; border-right: 1px solid #BDBDBD !important;"><span t-field="o.employee_id.department_id.name"/></td>
                            </tr>
                            <tr>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">NSS:</td>
                                <td style="width: 32%; vertical-align:top;"><span t-field="o.employee_id.imss"/></td>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important;">Días Trabajados</td>
                                <td style="width: 32%; vertical-align:top; border-right: 1px solid #BDBDBD !important;"><span t-esc="o.get_dias_trabajados()"/></td>
                            </tr>
                            <tr>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important; border-bottom: 1px solid #BDBDBD !important;">Tipo de Contrato:</td>
                                <td style="width: 32%; vertical-align:top; border-bottom: 1px solid #BDBDBD !important;"><span t-field="o.employee_id.contract_id.type_id.code"/></td>
                                <td style="width: 18%; vertical-align:top; border-left: 1px solid #BDBDBD !important; border-bottom: 1px solid #BDBDBD !important;">SDI</td>
                                <td style="width: 32%; vertical-align:top; border-right: 1px solid #BDBDBD !important; border-bottom: 1px solid #BDBDBD !important;"><span t-field="o.employee_id.sueldo_diario"/></td>
                            </tr>
                        </table>
                        <t t-set="p_total" t-value="0"/>
                        <t t-set="d_total" t-value="0"/>
                        <table class="table table-condensed" id="percepciones" style="width: 100%; font-size: 10px;">
                            <thead>
                                <tr>
                                    <th colspan="4">PERCEPCIONES:</th>
                                    <th colspan="4">DEDUCCIONES:</th>
                                </tr>
                                <tr>
                                    <th>Clave SAT</th>
                                    <th>Clave</th>
                                    <th style="width: 30%;">Descripción</th>
                                    <th>Importe</th>
                                    <th>Clave SAT</th>
                                    <th>Clave</th>
                                    <th style="width: 30%;">Descripción</th>
                                    <th>Importe</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="o.get_lines_dp()" t-as="d">
                                    <tr>
                                        <td>&amp;nbsp;<span t-esc="d['p_codesat']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['p_code']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['p_name']"/></td>
                                        <td style="text-align: right;">
                                            <t t-if="d['p_name'] != ' '">
                                                $ <span t-esc="d['p_total']"/>
                                                <t t-set="p_total" t-value="p_total+d['p_total']"/>
                                            </t>
                                        </td>
                                        <td>&amp;nbsp;<span t-esc="d['d_codesat']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['d_code']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['d_name']"/></td>
                                        <td style="text-align: right;">
                                            <t t-if="d['d_name'] != ' '">
                                                $ <span t-esc="d['d_total']"/>
                                                <t t-set="d_total" t-value="d_total+d['d_total']"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                                <tr>
                                    <th colspan="4">Otros Pagos:</th>
                                    <th colspan="4"></th>
                                </tr>
                                <t t-foreach="o.get_lines_o()" t-as="d">
                                    <tr>
                                        <td>&amp;nbsp;<span t-esc="d['p_codesat']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['p_code']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['p_name']"/></td>
                                        <td style="text-align: right;">
                                            <t t-if="d['p_name'] != ' '">
                                                $ <span t-esc="d['p_total']"/>
                                                <t t-set="p_total" t-value="p_total+d['p_total']"/>
                                            </t>
                                        </td>
                                        <td>&amp;nbsp;<span t-esc="d['d_codesat']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['d_code']"/></td>
                                        <td>&amp;nbsp;<span t-esc="d['d_name']"/></td>
                                        <td style="text-align: right;">
                                            <t t-if="d['d_name'] != ' '">
                                                $ <span t-esc="d['d_total']"/>
                                                <t t-set="d_total" t-value="d_total+d['d_total']"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3"><strong>Total de Percepciones y Otros Pagos </strong></td>
                                    <td style="text-align: right;">&amp;nbsp;$ <span t-esc="p_total"/></td>
                                    <td colspan="3"><strong>Total de Deducciones </strong></td>
                                    <td style="text-align: right;">&amp;nbsp;$ <span t-esc="d_total"/></td>
                                </tr>
                                <tr>
                                    <td colspan="5">&amp;nbsp;</td>
                                    <td colspan="2"><strong>Total a pagar </strong></td>
                                    <td style="text-align: right;"><span t-field="o.total"/></td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="width: 50%;text-align: justify;"><span t-esc="o.get_message() "/></td>
                                    <td colspan="4" style="width: 50%;">
                                        <div class="row">
                                            <div class="col-4"><br /><br/><span>&amp;nbsp;</span></div>
                                            <div class="col-4 text-center" style="text-align: center; border-top: 1px solid #BDBDBD;">
                                                <span>FIRMA DEL TRABAJADOR </span>
                                            </div>
                                            <div class="col-4"><br /><br/><span>&amp;nbsp;</span></div>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        <table class="table table-condensed" id="info" style="width: 100%; font-size: 10px;">
                            <tr>
                                <td style="width: 35%; text-align: center; vertical-align:top;">
                                    <img t-if="o.qrcode" t-att-src="'data:image/png;base64,%s' % o.qrcode" style="vertical-align: text-top; width:140px!important;height:140px!important;"/>
                                </td>
                                <td style="width: 5%;"><span>&amp;nbsp;</span></td>
                                <td style="width: 60%; vertical-align:top;">
                                    <table class="table table-condensed" style="width: 100%;">
                                        <thead>
                                            <tr>
                                                <th colspan="2"><span>Este documento es una representación impresa de un CFDI</span> </th>
                                            </tr><tr>
                                                <td colspan="2"><strong>Pago en Una Sola Exhibición</strong></td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Folio Fiscal UUID: </strong></td>
                                                <td><span t-esc="o.uuid"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Número de Certificado: </strong></td>
                                                <td><span t-esc="o.noCertificado"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Número de Certificado SAT: </strong></td>
                                                <td><span t-esc="o.certificado_sat"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Fecha y hora Certificación: </strong></td>
                                                <td><span t-esc="o.fecha_timbrado"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="width: 100%;">
                                    <t t-if="o.sello_sat">
                                        <strong>Sello Digital CFDI: </strong> <t t-esc="o.get_info_sat(o.sello_sat)"/>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="width: 100%;">
                                    <t t-if="o.cadena_sat">
                                        <strong>Cadena original del complemento de certificación SAT: </strong><br/>
                                        <t t-esc="o.get_info_sat(o.cadena_sat)"/>
                                    </t>
                                </td>
                            </tr>
                        </table>
                </div>
            </t>
        </template>




        <template id="recibo">

            <div class="o_nomina" style="width:100%; min-height:532px; border: 0px solid grey;">
                <!-- ENCABEZADO -->
                <div class="row" style="margin-top: 0px; margin-bottom: 0px;">
                    <!-- Logotipo -->
                    <div class="col-xs-3 text-center">
                        <div style="text-align:center; height:60px;">
                            <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % o.company_id.logo" class="img img-responsive" style="max-height:60px;"/>
                        </div>
                    </div>
                    <!-- Empresa -->
                    <div class="empresa col-xs-6 text-center">
                        <address t-att-style="Address">
                            <span t-field="o.company_id.partner_id.name" t-att-style="Address_Company"/><br/>
                            RFC:<span t-field="o.company_id.partner_id.vat"/>, RPU:<span t-field="o.company_id.registro_patronal_id.name"/><br/>
                            <span t-field="o.company_id.partner_id.street"/>
                            <span t-field="o.company_id.partner_id.noExterior"/>,
                            <span t-field="o.company_id.partner_id.street2"/><br/>
                            <span t-field="o.company_id.partner_id.city"/>,
                            <span t-field="o.company_id.partner_id.state_id.name"/>,
                            <span t-field="o.company_id.partner_id.country_id.name"/>,
                            <span t-field="o.company_id.partner_id.zip"/>
                        </address>
                    </div>
                    <div class="col-xs-3" style="text-align: right;">
                        <div style="float: right; width:80px !important; height:80px !important; background-color:#dddddd;">
                            <img t-if="o.qrcode" t-att-src="'data:image/png;base64,%s' % o.qrcode" style="width:80px !important; height:80px !important;"/>
                        </div>
                    </div>
                </div>
                <!-- Datos SAT -->
                <table class="empleado table table-condensed" style="margin-bottom: 0px;">
                    <tr>
                        <td class="etiqueta">Versión:</td>
                        <td class="dato">3.3</td>
                        <td class="etiqueta">Tipo de comprobante:</td>
                        <td class="dato">N</td>
                        <td class="etiqueta">Régimen Fiscal:</td>
                        <td class="dato">Régimen General de Ley Personas Morales</td>
                    </tr>
                    <tr>
                        <td class="etiqueta">Tipo de Nomina:</td>
                        <td class="dato"><span t-field="o.tipo_nomina"/></td>
                        <td class="etiqueta">Fecha de pago:</td>
                        <td class="dato"><span t-field="o.fecha_pago" t-field-options="{&quot;format&quot;: &quot;yyyy-MM-dd&quot;}"/></td>
                        <td class="etiqueta">Tipo de Contrato:</td>
                        <td class="dato"><span t-field="o.contract_id.type_id"/></td>
                    </tr>
                </table>
                <!-- Datos empleado -->
                <table class="empleado table table-condensed" style="margin-bottom: 1px;">
                    <tr>
                        <td class="etiqueta">NumEmp:</td>
                        <td class="dato"><span t-field="o.employee_id.cod_emp"/></td>
                        <td class="etiqueta">RFC:</td>
                        <td class="dato"><span t-field="o.employee_id.rfc"/></td>
                        <td class="etiqueta">Fecha Ingreso:</td>
                        <!-- <td class="dato"><span t-field="o.employee_id.fecha_alta" t-field-options="{&quot;format&quot;: &quot;yyyy-MMM-dd&quot;}"/></td> -->
                        <td class="dato"><span t-field="o.contract_id.date_start" t-field-options="{&quot;format&quot;: &quot;yyyy-MM-dd&quot;}"/></td>
                    </tr>
                    <tr>
                        <td class="etiqueta">Nombre:</td>
                        <td class="dato"><span t-field="o.employee_id.nombre_completo"/></td>
                        <td class="etiqueta">NSS:</td>
                        <td class="dato"><span t-field="o.employee_id.imss"/></td>
                        <td class="etiqueta">Años de servicio:</td>
                        <td class="dato"><span t-esc="atra"/></td>
                    </tr>
                    <tr>
                        <td class="etiqueta">Depto.:</td>
                        <td class="dato"><span t-field="o.employee_id.department_id.name"/></td>
                        <td class="etiqueta">Dias Trab.:</td>
                        <td class="dato"><span t-esc="diast"/></td>
                        <td class="etiqueta">Periodo:</td>
                        <td class="dato"><span t-esc="o.get_periodo()"/></td>
                    </tr>
                    <tr>
                        <td class="etiqueta">&amp;nbsp;</td>
                        <td class="dato">&amp;nbsp;</td>
                        <td class="etiqueta">Faltas:</td>
                        <td class="dato"><span t-esc="fal['total']"/></td>
                        <td class="etiqueta">Incapacidad:</td>
                        <td class="dato"><span t-esc="inca['total']"/> dia(s)</td>
                    </tr>
                </table>
                <div style="font-size: 7pt;">
                    <table class="table table-condensed" id="info" style="width: 100%; margin-bottom: 1px;">
                        <tr>
                            <td style="width: 50%; text-align: center; vertical-align:top;">
                            <!-- PERCEPCIONES -->
                            <t t-if="agpf['total'] &gt; 0">
                                <!-- PERCEPCIONES nomina finiquitos -->
                                <table class="pyd table table-condensed" style="width: 100%; margin-bottom: 1px; background-color: #EEE;">
                                    <thead>
                                        <tr>
                                            <th colspan="4"><span>PERCEPCIONES</span> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="width: 10%;"><strong>C.SAT: </strong></td>
                                            <td style="width: 50%;"><strong>Concepto: </strong></td>
                                            <td style="width: 20%; text-align: center;"><strong>Gravado: </strong></td>
                                            <td style="width: 20%; text-align: center;"><strong>Exento: </strong></td>
                                        </tr>
                                        <t t-if="vacf['total'] &gt; 0">
                                            <tr> <!-- Vacaciones Fin-->
                                                <td><span t-esc="vacf['codesat']"/></td>
                                                <td><span t-esc="vacf['name']"/></td>
                                                <td style="text-align: right;"><span t-esc="vacgrf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                                <td style="text-align: right;"><span>$ 0.00 </span></td>
                                            </tr>
                                        </t>
                                        <t t-if="pvacf['total'] &gt; 0">
                                            <tr> <!-- Prima vacacional Fin-->
                                                <td><span t-esc="pvacf['codesat']"/></td>
                                                <td><span t-esc="pvacf['name']"/></td>
                                                <td style="text-align: right;"><span t-esc="pvgf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                                <td style="text-align: right;"><span t-esc="pvexf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="agpf['total'] &gt; 0">
                                            <tr> <!-- Aguinaldo Fin-->
                                                <td><span t-esc="agpf['codesat']"/></td>
                                                <td>Gratificación Anual (Aguinaldo)</td>
                                                <td style="text-align: right;"><span t-esc="aggrf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                                <td style="text-align: right;"><span t-esc="agexf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <tr>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong>Total Percepciones:</strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="total_p" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="percgf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="percexf['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                            <t t-elif="agpa['total'] &gt; 0">
                                <!-- PERCEPCIONES nomina aguinaldos -->
                                <table class="pyd table table-condensed" style="width: 100%; margin-bottom: 1px; background-color: #EEE;">
                                    <thead>
                                        <tr>
                                            <th colspan="4"><span>PERCEPCIONES</span> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="width: 10%;"><strong>C.SAT: </strong></td>
                                            <td style="width: 50%;"><strong>Concepto: </strong></td>
                                            <td style="width: 20%; text-align: center;"><strong>Gravado: </strong></td>
                                            <td style="width: 20%; text-align: center;"><strong>Exento: </strong></td>
                                        </tr>
                                        <t t-if="agpa['total'] &gt; 0">
                                            <tr> <!-- Aguinaldo -->
                                                <td><span t-esc="agpa['codesat']"/></td>
                                                <td>Gratificación Anual (Aguinaldo)</td>
                                                <td style="text-align: right;"><span t-esc="aggra['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                                <td style="text-align: right;"><span t-esc="agexa['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <tr>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong>Total Percepciones:</strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="total_p" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="percga['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="percexa['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                            <t t-else="">
                                <!-- PERCEPCIONES nomina normal-->
                                <table class="pyd table table-condensed" style="width: 100%; margin-bottom: 1px; background-color: #EEE;">
                                    <thead>
                                        <tr>
                                            <th colspan="4"><span>PERCEPCIONES</span> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="width: 10%;"><strong>C.SAT: </strong></td>
                                            <td style="width: 60%;"><strong>Concepto: </strong></td>
                                            <td style="width: 10%;"><strong>Dias: </strong></td>
                                            <td style="width: 20%; text-align: right;"><strong>Monto: </strong></td>
                                        </tr>
                                        <t t-if="sue['total'] &gt; 0">
                                            <tr> <!-- Sueldo -->
                                                <td><span t-esc="sue['codesat']"/></td>
                                                <td><span t-esc="sue['name']"/></td>
                                                <td><span t-esc="dia['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="sue['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>

                                        <t t-if="sdd['total'] &gt; 0">
                                            <tr> <!-- Séptimo día -->
                                                <td><span t-esc="sdd['codesat']"/></td>
                                                <td><span t-esc="sdd['name']"/></td>
                                                <td><span t-esc="sdu['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="sdd['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="vac['total'] &gt; 0">
                                            <tr> <!-- Vacaciones -->
                                                <td><span t-esc="vac['codesat']"/></td>
                                                <td><span t-esc="vac['name']"/></td>
                                                <td><span t-esc="ddv['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="vac['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="pvac['total'] &gt; 0">
                                            <tr> <!-- Prima vacacional -->
                                                <td><span t-esc="pvac['codesat']"/></td>
                                                <td><span t-esc="pvac['name']"/></td>
                                                <td><span t-esc="ddv['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="pvac['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="aaa['total'] &gt; 0">
                                            <tr>  <!-- Cve. Prima Vac. anterior -->
                                                <td><span t-esc="aaa['codesat']"/></td>
                                                <td><span t-esc="aaa['name']"/></td>
                                                <td/>
                                                <td style="text-align: right;"><span t-esc="aaa['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="dela['total'] &gt; 0">
                                            <tr> <!-- Descanso laborado -->
                                                <td><span t-esc="dela['codesat']"/></td>
                                                <td><span t-esc="dela['name']"/></td>
                                                <td><span t-esc="dias_des_lab['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="dela['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="prdo['total'] &gt; 0">
                                            <tr> <!-- Prima dominical -->
                                                <td><span t-esc="prdo['codesat']"/></td>
                                                <td><span t-esc="prdo['name']"/></td>
                                                <td><span t-esc="dias_prdo['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="prdo['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="fela['total'] &gt; 0">
                                            <tr> <!-- Festivo laborado -->
                                                <td><span t-esc="fela['codesat']"/></td>
                                                <td><span t-esc="fela['name']"/></td>
                                                <td><span t-esc="dias_fes_lab['total']"/></td>
                                                <td style="text-align: right;"><span t-esc="fela['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="agpre['total'] &gt; 0">
                                            <tr> <!-- Aguinaldo -->
                                                <td><span t-esc="agpre['codesat']"/></td>
                                                <td>Aguinaldo</td>
                                                <td/>
                                                <td style="text-align: right;"><span t-esc="agpre['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <tr>
                                            <td style="text-align: right; padding-bottom: 0px;" colspan="3">
                                                <strong>Total Percepciones:</strong>
                                            </td>
                                            <td style="text-align: right; padding-bottom: 0px;">
                                                <strong><span t-esc="total_p" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                            </td>
                            <td style="width: 50%; vertical-align:top;">
                                <!-- DEDUCCIONES -->
                                <table class="pyd table table-condensed" style="width: 100%; margin-bottom: 1px; background-color: #EEE;">
                                    <thead>
                                        <tr>
                                            <th colspan="3"><span>DEDUCCIONES</span> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>C.SAT: </strong></td>
                                            <td><strong>Concepto: </strong></td>
                                            <td style="text-align: right;"><strong>Monto: </strong></td>
                                        </tr>
                                        <t t-if="isr['total'] &gt; 0">
                                            <tr> <!-- ISR -->
                                                <td><span t-esc="isr['codesat']"/></td>
                                                <td>
                                                    <t t-if="isrs &gt; 0"> <span t-esc="isr['name']"/> </t>
                                                    <t t-else=""> <span t-esc="sae['name']"/> </t>
                                                </td>
                                                <td style="text-align: right;"><span t-esc="isrs" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="ispt['total'] &gt; 0">
                                            <tr> <!-- ISR -->
                                                <td><span t-esc="ispt['codesat']"/></td>
                                                <td>
                                                    <t t-if="ispts &gt; 0"> <span t-esc="ispt['name']"/> </t>
                                                    <t t-else=""> <span t-esc="sae['name']"/> </t>
                                                </td>
                                                <td style="text-align: right;"><span t-esc="ispts" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="isrf['total'] &gt; 0">
                                            <tr> <!-- ISR -->
                                                <td><span t-esc="isrf['codesat']"/></td>
                                                <td>
                                                    <t t-if="isrsf &gt; 0"> <span t-esc="isrf['name']"/> </t>
                                                    <t t-else=""> <span t-esc="saef['name']"/> </t>
                                                </td>
                                                <td style="text-align: right;"><span t-esc="isrsf" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="isra['total'] &gt; 0">
                                            <tr> <!-- ISR -->
                                                <td><span t-esc="isrf['codesat']"/></td>
                                                <td>
                                                    <t t-if="isrsa &gt; 0"> <span t-esc="isra['name']"/> </t>
                                                    <t t-else=""> <span t-esc="saea['name']"/> </t>
                                                </td>
                                                <td style="text-align: right;"><span t-esc="isrsa" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="rdimss['total'] &gt; 0">
                                            <tr>  <!-- Retención IMSS -->
                                                <td><span t-esc="rdimss['codesat']"/></td>
                                                <td><span t-esc="rdimss['name']"/></td>
                                                <td style="text-align: right;"><span t-esc="rdimss['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="rci['total'] &gt; 0">
                                            <tr>  <!-- Retención INFONAVIT -->
                                                <td><span t-esc="rci['codesat']"/></td>
                                                <td><span t-esc="rci['name']"/></td>
                                                <td style="text-align: right;"><span t-esc="rci['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="otp['total'] &gt; 0">
                                            <tr>  <!-- Otras Préstamo -->
                                                <td><span t-esc="otp['codesat']"/></td>
                                                <td><span t-esc="otp['name']"/></td>
                                                <td style="text-align: right;"><span t-esc="otp['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <t t-if="isragt['total'] &gt; 0">
                                            <tr>  <!-- Aguinaldo -->
                                                <td><span t-esc="isragt['codesat']"/></td>
                                                <td>ISR Aguinaldo</td>
                                                <td style="text-align: right;"><span t-esc="isragt['total']" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                        <tr>
                                            <td style="text-align: right;" colspan="2">
                                                <strong>Total Deducciones:</strong></td>
                                            <td style="text-align: right;">
                                                <strong><span t-esc="totalatra_d" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/></strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <t t-if="note"><div style="padding-top:20px; text-align: right;">(<strong>Nota:</strong> <span t-esc="note"/>)</div></t>
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- Textos legales, firma, Neto y datos del CFDi -->
                <t t-set="nap_letra" t-value="o.get_cantLetra(nap)[0]"/>  <!-- Neto a pagar en letra -->
                <table class="table table-condensed" id="info" style="width: 100%; margin-bottom: 0px;">
                    <tr class="pagar">
                        <td colspan="2" style="text-align:right; white-space: nowrap;">
                            A Pagar: <strong><span t-esc="nap" t-esc-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                            (<span t-esc="nap_letra"/>)</strong>
                        </td>
                    </tr>
                    <tr class="recibi">
                        <td style="text-align: justify; background-color: #fff;">
                            Recibí de conformidad el pago mostrado en este recibo por el sueldo y Prestaciones que me corresponden por los
                            trabajos que he desempeñado declaro que me considero legal y satisfactoriamente pagado hasta la fecha en virtud de
                            haberse cumplido en todas sus partes en la Ley Federal del Trabajo. Y que no se me adeuda cantidad alguna por
                            concepto de sueldos y salarios, tiempo extra, vacaciones, prima vacacional y aguinaldo.
                        </td>
                        <td style="width:35%; text-align: center; vertical-align:bottom;">
                            <div style="border-top: 1px solid #808080; padding-top: 5px;">Firma del Empleado</div>
                        </td>
                    </tr>
                </table>
                <div>
                    <div class="sello" style="display: inline-block; word-wrap:break-word; text-align: left;">
                        <t t-if="o.sello_sat">
                            <strong>Sello Digital CFDI: </strong><br/>
                            <t t-esc="o.slice_info(o.sello_sat,172)"/><br/>
                        </t>
                        <t t-if="o.cadena">
                            <strong>Cadena original del complemento de certificación SAT: </strong><br/>
                            <t t-esc="o.slice_info(o.cadena_sat,172)"/>
                        </t>
                    </div>
                    <div class="sello" style="text-align: center;">
                        <strong>Este documento es una representación impresa de un CFDi-Nómina. </strong> --
                        <strong>FechaTimbrado:</strong><span t-esc="o.fecha_timbrado"/>,<br/>
                        <strong>UUID:</strong><span t-esc="o.uuid"/>,
                        <strong>Certificado:</strong><span t-esc="o.noCertificado"/>,
                        <strong>CertificadoSAT:</strong><span t-esc="o.certificado_sat"/>
                    </div>
                </div>


            </div>


        </template>



        <template id="report_hr_payslip_mx_document">
            <t t-call="report.html_container">
                <div class="page">
                    <!-- Faltas e incapacidades -->
                    <t t-set="fal" t-value="o.get_lines_reportcode('FAL')"/>
                    <t t-set="inca" t-value="o.get_lines_reportcode('INCA')"/>

                    <t t-set="sue" t-value="o.get_lines_reportcode('SUE')"/>
                    <t t-set="vac" t-value="o.get_lines_reportcode('VAC')"/>
                    <t t-set="sdd" t-value="o.get_lines_reportcode('SDD')"/>
                    <t t-set="aaa" t-value="o.get_lines_reportcode('AAA')"/>
                    <t t-set="dela" t-value="o.get_lines_reportcode('DELA')"/>
                    <t t-set="fela" t-value="o.get_lines_reportcode('FELA')"/>
                    <t t-set="prdo" t-value="o.get_lines_reportcode('PRDO')"/>
                    <t t-set="pvac" t-value="o.get_lines_reportcode('PVAC')"/>
                    <!-- Aguinaldo -->
                    <t t-set="agpre" t-value="o.get_lines_reportcode('AGPRE')"/>

                    <!-- Finiquito: Nombres-->
                    <t t-set="vacf" t-value="o.get_lines_reportcode('VACF')"/>
                    <t t-set="pvacf" t-value="o.get_lines_reportcode('PVACF')"/>
                    <t t-set="agpf" t-value="o.get_lines_reportcode('AGPF')"/>
                    <!-- Gravados: Finiquito -->
                    <t t-set="vacgrf" t-value="o.get_lines_reportcode('VACGRF')"/>
                    <t t-set="pvgf" t-value="o.get_lines_reportcode('PVGF')"/>
                    <t t-set="aggrf" t-value="o.get_lines_reportcode('AGGRF')"/>
                    <t t-set="percgf" t-value="o.get_lines_reportcode('PERCGF')"/>
                    <!-- Exentos: Finiquito -->
                    <t t-set="pvexf" t-value="o.get_lines_reportcode('PVEXF')"/>
                    <t t-set="agexf" t-value="o.get_lines_reportcode('AGEXF')"/>
                    <t t-set="percexf" t-value="o.get_lines_reportcode('PERCEXF')"/>

                    <!-- Aguinaldo: Nombres-->
                    <t t-set="agpa" t-value="o.get_lines_reportcode('AGPA')"/>
                    <!-- Gravados: Aguinaldo -->
                    <t t-set="aggra" t-value="o.get_lines_reportcode('AGGRA')"/>
                    <t t-set="percga" t-value="o.get_lines_reportcode('PERCGA')"/>
                    <!-- Exentos: Aguinaldo -->
                    <t t-set="agexa" t-value="o.get_lines_reportcode('AGEXA')"/>
                    <t t-set="percexa" t-value="o.get_lines_reportcode('PERCEXA')"/>

                    <!-- Dias -->
                    <t t-set="dia" t-value="o.get_lines_reportcode('DIA')"/>
                    <t t-set="sdu" t-value="o.get_lines_reportcode('SDU')"/>
                    <t t-set="ddv" t-value="o.get_lines_reportcode('DDV')"/>
                    <t t-set="dias_des_lab" t-value="o.get_lines_reportcode('DIAS_DES_LAB')"/>
                    <t t-set="dias_fes_lab" t-value="o.get_lines_reportcode('DIAS_FES_LAB')"/>
                    <t t-set="dias_prdo" t-value="o.get_lines_reportcode('DIAS_PRDO')"/>
                    <t t-set="dia" t-value="o.get_lines_reportcode('DIA')"/>
                    <t t-set="ddvf" t-value="o.get_lines_reportcode('DDVF')"/>
                    <t t-set="dagpf" t-value="o.get_lines_reportcode('DAGPF')"/>

                    <t t-set="diast" t-value="dia['total'] + sdu['total']"/>
                    <t t-set="atra" t-value="round(o.contract_id.total_days_worked / 365.25)"/>

                    <!-- Deducciones -->
                    <t t-set="isr" t-value="o.get_lines_reportcode('ISR')"/>
                    <t t-set="rdimss" t-value="o.get_lines_reportcode('RDIMSS')"/>
                    <t t-set="rci" t-value="o.get_lines_reportcode('RCI')"/>
                    <t t-set="otp" t-value="o.get_lines_reportcode('OTP')"/>
                    <t t-set="ispt" t-value="o.get_lines_reportcode('ISPT')"/>
                    <!-- Aguinaldo -->
                    <t t-set="isragt" t-value="o.get_lines_reportcode('ISRAGT')"/>
                    <!-- Finiquito -->
                    <t t-set="isrf" t-value="o.get_lines_reportcode('ISRF')"/>
                    <t t-set="isra" t-value="o.get_lines_reportcode('ISRA')"/>

                    <!-- Subsidio -->
                    <t t-set="sae" t-value="o.get_lines_reportcode('SAE')"/>
                    <t t-set="isrs" t-value="isr['total'] - sae['total']"/>
                    <t t-set="ispts" t-value="ispt['total'] - sae['total']"/>
                    <t t-set="saef" t-value="o.get_lines_reportcode('SAEF')"/>
                    <t t-set="isrsf" t-value="isrf['total'] - saef['total']"/>
                    <t t-set="saea" t-value="o.get_lines_reportcode('SAEA')"/>
                    <t t-set="isrsa" t-value="isra['total'] - saea['total']"/>

                    <!-- Totales -->
                    <t t-set="total_p" t-value="o.get_lines_reportcode('TOP')['total']"/>
                    <t t-set="nap" t-value="o.get_lines_reportcode('NAP')['total']"/>
                    <t t-set="total_d" t-value="total_p - nap"/>

                    <t t-if="agpre['total'] &gt; 0">
                        <t t-set="total_p" t-value="agpre['total']"/>
                        <t t-set="total_d" t-value="isragt['total']"/>
                        <t t-set="nap" t-value="total_p - total_d"/>
                    </t>

                    <!-- Notas -->
                    <t t-set="note" t-value="o.note"/>

                    <!-- Copia superior -->
                    <t t-call="cfdi_nomina.recibo"/>

                    <!-- Separador -->
                    <div style="width:100%; height:20px; margin-top:20px; border-top: 1px dotted #CCC;"/>

                    <!-- Copia inferior -->
                    <t t-call="cfdi_nomina.recibo"/>

                </div>
            </t>
        </template>


        <template id="report_hr_payslip_mx">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="cfdi_nomina.report_hr_payslip_mx_document"/>
                </t>
            </t>
        </template>


    </data>
</odoo>
